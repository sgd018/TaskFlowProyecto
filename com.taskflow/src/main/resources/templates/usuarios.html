<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Usuarios - TaskFlow</title>
    <link rel="stylesheet" href="style.css">
</head>
<body id="user-list-page">
    <div class="app-layout">
        <aside class="sidebar" id="sidebar">
            <div class="logo">TaskFlow</div>
            <nav>
                <ul>
                    <li><a href="/dashboard">Dashboard</a></li>
                    <li><a href="/usuarios" style="background-color: #F0F3FF; color: #4A69FF;">Gestión Usuarios</a></li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
             <header class="page-header">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <button class="menu-toggle" id="menu-toggle">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 12H21M3 6H21M3 18H21" stroke="#1E293B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </button>
                    <h1>Gestión de Usuarios</h1>
                </div>
                <a href="/invitar-usuario" class="btn btn-primary">+ Invitar Usuario</a>
            </header>

			<div th:if="${mensaje}" style="background-color: #d1fae5; color: #065f46; padding: 10px; border-radius: 8px; margin-bottom: 16px;">
			    <span th:text="${mensaje}"></span>
			</div>
			<div th:if="${error}" style="background-color: #fee2e2; color: #991b1b; padding: 10px; border-radius: 8px; margin-bottom: 16px;">
			    <span th:text="${error}"></span>
			</div>
            <div class="card">
                <div class="table-wrapper">
				    <table class="responsive-table">
				        <thead>
				            <tr>
				                <th>Nombre</th>
				                <th>Email</th>
				                <th>Rol</th>
				                <th>Acciones</th>
				            </tr>
				        </thead>
				        <tbody id="user-list-body">
				            <tr th:each="u : ${listaUsuarios}">
				                <td th:text="${u.nombre}">Nombre Genérico</td>
				                <td th:text="${u.email}">email@test.com</td>
				                <td>
				                    <span class="status-badge status-in-progress" th:text="${u.rolNombre}">Rol</span>
				                </td>
				                <td>
								    <a th:href="@{/usuarios/editar/{id}(id=${u.usuarioId})}" 
								       class="btn btn-primary" 
								       style="padding: 5px 10px; font-size: 12px; margin-right: 5px; text-decoration: none;">
								       Editar
								    </a>
								
								    <a th:href="@{/usuarios/eliminar/{id}(id=${u.usuarioId})}" 
								       class="btn btn-danger" 
								       style="padding: 5px 10px; font-size: 12px;"
								       onclick="return confirm('¿Estás seguro?');">
								       Eliminar
								    </a>
								</td>
				            </tr>
				        </tbody>
				    </table>
				</div>
            </div>
        </main>
    </div>
</body>
</html>